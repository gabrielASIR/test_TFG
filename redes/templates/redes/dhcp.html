<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuración DHCP</title>
    <script>
        function agregarCliente() {
            const numClientes = document.querySelectorAll('.cliente').length + 1;
            const template = `
                <div class="cliente">
                    <fieldset>
                        <legend>Cliente ${numClientes}</legend>
                        <label for="nombre_cliente_${numClientes}">Nombre del cliente:</label><br>
                        <input type="text" id="nombre_cliente_${numClientes}" name="nombre_cliente_${numClientes}" placeholder="Especifique el nombre del equipo cliente de DHCP"><br><br>

                        <label for="direccion_ip_${numClientes}">Dirección IP deseada:</label><br>
                        <input type="text" id="direccion_ip_${numClientes}" name="direccion_ip_${numClientes}" placeholder="Ej: 192.168.1.10 / 10.0.0.0"><br><br>

                        <label for="mac_address_${numClientes}">Dirección MAC:</label><br>
                        <input type="text" id="mac_address_${numClientes}" name="mac_address_${numClientes}" placeholder="Ej: DE:AD:BE:EF:00:01 / 00-1A-2B-3C-4D-5E"><br><br>

                        <label for="interfaz_${numClientes}">Interfaz:</label><br>
                        <select id="interfaz_${numClientes}" name="interfaz_${numClientes}">
                            <option value="enp0s3">enp0s3</option>
                            <option value="enp0s8">enp0s8</option>
			    <option value="enp0s8">enp0s9</option>
                        </select><br><br>

                        <label for="direccion_servidor_${numClientes}">Dirección del servidor DHCP:</label><br>
                        <input type="text" id="direccion_servidor_${numClientes}" name="direccion_servidor_${numClientes}" placeholder="Direccion del servidor DHCP. Ej: 192.168.10.100"><br><br>

                        <button type="button" onclick="eliminarCliente(this)">Eliminar Cliente</button>
                    </fieldset>
                    <br>
                </div>
            `;
            document.getElementById('clientes').insertAdjacentHTML('beforeend', template);
        }

        function eliminarCliente(button) {
            button.closest('.cliente').remove();
        }
    </script>
</head>
<body>
    <h1>Configuración DHCP</h1>
    <p>A la hora de configurar equipos dentro de las diferentes redes, estos se identifican mediante interfaces de red.
    Estas interfaces, como ya hemos dicho, son las que van a contener las direcciones IP con las cuales el equipo será conocido
    o tendrá conexión.</p><br><br>
	
    <p>De igual manera, una interfaz puede ser configurada de varias formas: estático, dchp.</p>
    <ul>
	 <li>Estática. Se configura de manera manual</li>
	 <li>DCHP. A través de un servidor, se proporciona automáticamente</li>
    </ul><br>
    <p>En este caso, se configuran interfaces vía DHCP.</p><br>
    <p>Además, se ha incluido una dinámica de solicitud de reserva al servidor DHCP, ya que sin reserva te da una dirección automáticamente.
    Así, si queremos seguir con DHCP pero tener una dirección fija, realizamos la reserva y vía scp se manda al servidor para que este la aplique.</p><br><br>
    <h2>Configuración Cliente DHCP</h2>
	
    {% if mensaje_error %}
        <p>{{ mensaje_error }}</p>
    {% endif %}

    <form method="post" action="{% url 'redes:dhcp' %}">
        {% csrf_token %}
        <label for="num_interfaces">Número de Clientes:</label><br>
        <input type="number" id="num_clientes" name="num_clientes" min="1" value="1" required><br><br>
        <div id="clientes">
            <div class="cliente">
                <fieldset>
                    <legend>Cliente 1</legend>
                    <label for="nombre_cliente_1">Nombre del cliente:</label><br>
                    <input type="text" id="nombre_cliente_1" name="nombre_cliente_1" placeholder="Especifique el nombre del equipo cliente de DHCP"><br><br>

                    <label for="direccion_ip_1">Dirección IP deseada:</label><br>
                    <input type="text" id="direccion_ip_1" name="direccion_ip_1" placeholder="Ej: 192.168.1.10 / 10.0.0.0"><br><br>

                    <label for="mac_address_1">Dirección MAC:</label><br>
                    <input type="text" id="mac_address_1" name="mac_address_1" placeholder="Ej: DE:AD:BE:EF:00:01 / 00-1A-2B-3C-4D-5E"><br><br>

                    <label for="interfaz_1">Interfaz:</label><br>
                    <select id="interfaz_1" name="interfaz_1">
                        <option value="enp0s3">enp0s3</option>
                        <option value="enp0s8">enp0s8</option>
                        <option value="enp0s9">enp0s8</option>
                    </select><br><br>

                    <label for="direccion_servidor_1">Dirección del servidor DHCP:</label><br>
                    <input type="text" id="direccion_servidor_1" name="direccion_servidor_1" placeholder="Direccion del servidor DHCP. Ej: 192.168.10.100"><br><br>

                    <button type="button" onclick="eliminarCliente(this)">Eliminar Cliente</button>
                </fieldset>
                <br>
            </div>
        </div>

        <button type="button" onclick="agregarCliente()">Agregar Cliente</button><br><br>
        
        <button type="submit">Guardar Configuración</button>
    </form>            
            

    <h2>Petición de Reserva de Dirección IP</h2>

    {% if mensaje_error %}
        <p>{{ mensaje_error }}</p>
    {% endif %}

    <form method="post" action="{% url 'redes:reserva_ip' %}">
        {% csrf_token %}
        <label for="nombre_cliente_reserva">Nombre del cliente:</label><br>
        <input type="text" id="nombre_cliente_reserva" name="nombre_cliente_reserva" placeholder="Nombre del cliente que quiere hacer reserva"><br><br>

        <label for="direccion_ip_reserva">Dirección IP a reservar:</label><br>
        <input type="text" id="direccion_ip_reserva" name="direccion_ip_reserva" placeholder="Ej: 192.168.190.2"><br><br>

        <label for="mac_address_reserva">Dirección MAC:</label><br>
        <input type="text" id="mac_address_reserva" name="mac_address_reserva" placeholder="Ej: 00:1A:2B:3C:4D:5E"><br><br>

        <label for="direccion_servidor_reserva">Dirección del servidor DHCP:</label><br>
        <input type="text" id="direccion_servidor_reserva" name="direccion_servidor_reserva" placeholder="Servidor al cual vamos a pedir la reserva"><br><br>

	<label for="nombre_usuario">Nombre de Usuario SSH:</label><br>
        <input type="text" id="nombre_usuario" name="nombre_usuario" placeholder="Nombre del usuario del servidor"><br><br>

	<label for="carpeta_destino">Carpeta de Destino en el Servidor:</label><br>
        <input type="text" id="carpeta_destino" name="carpeta_destino" placeholder="Ej: /home/gabriel/reservasdhcp"><br><br>

        <button type="submit">Solicitar Reserva</button>
    </form>
</body>
</html>
